"use strict";(()=>{var ie=Object.defineProperty;var ht=Object.getOwnPropertyDescriptor;var gt=Object.getOwnPropertyNames;var yt=Object.prototype.hasOwnProperty;var P=(t,e)=>()=>(t&&(e=t(t=0)),e);var dt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U=(t,e)=>{for(var s in e)ie(t,s,{get:e[s],enumerable:!0})},mt=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of gt(e))!yt.call(t,n)&&n!==s&&ie(t,n,{get:()=>e[n],enumerable:!(r=ht(e,n))||r.enumerable});return t};var B=t=>mt(ie({},"__esModule",{value:!0}),t);var c=(t,e,s)=>new Promise((r,n)=>{var a=u=>{try{i(s.next(u))}catch(f){n(f)}},o=u=>{try{i(s.throw(u))}catch(f){n(f)}},i=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,o);i((s=s.apply(t,e)).next())});function be(t){try{return t.split("/")[2].split(":")[0]}catch(e){}return""}function T(t){return t=="<all_urls>"&&(t=":*://*/*"),t=t.replace(/\./g,"\\."),t=t.replace(/\//g,"\\/"),t=t.replace(/\?/g,"\\?"),t=t.replace(/\+/g,"\\+"),t=t.replace(/\*/g,".*"),t=t.replace(":\\/\\/.*\\.","://(.+\\.)?"),t="^"+t+"$",new RegExp(t)}function J(t){let e={};if(t&&t.headers&&t.headers instanceof Headers)for(let s of t.headers.keys())e[s]=t.headers.get(s);return e}function ue(t,e){try{if(!e||e=="text")return t.text();if(e=="json")return t.json();if(e=="arrayBuffer")return t.arrayBuffer()}catch(s){}return Promise.resolve(void 0)}function Se(t){return c(this,null,function*(){let e=t.url,s=yield caches.keys();for(let r of s){let a=yield(yield caches.open(r)).keys(t);for(let o of a)if(o.url==e)return J(o)}return{}})}function Ce(t,e,s,r){if(!self.cheerio)return t;let n=self.cheerio.load(t);if(e)for(let a=0;a<e.length;a++){let o=n("<script>");o.attr("type","application/javascript"),s?o.text(e[a]):o.attr("src",e[a]),r&&o.attr("nonce",r),n("head").prepend(o)}return n.html()}function De(t,e,s,r){if(!self.cheerio)return t;let n=self.cheerio.load(t);if(e)for(let a=0;a<e.length;a++){let o=n("<script>");o.attr("type","application/javascript"),s?o.text(e[a]):o.attr("src",e[a]),r&&o.attr("nonce",r),n("body").append(o)}return n.html()}function Pe(t){let e={};if(t){let s=ce(t).split(",");for(let r=0;r<s.length;r++){let n=s[r];if(n!=""){n=ce(n);let a=qt(n),o=wt(a,"script-src","default-src");for(let i of o)i.indexOf("'nonce-")==0&&(e[i.split("'nonce-")[1].slice(0,-1)]="")}}}return e}function ce(t){let e=t.split(/\s+/).join(" ");return e=e.replace(/^[ ]+|[ ]+$/g,""),e}function qt(t){let e=t.split(";"),s={};for(let r=0;r<e.length;r++){let n=ce(e[r]).split(" "),a=n[0],o=n.slice(1);a in s||(s[a]=o)}return s}function wt(t,e,s){return t[e]||t[s]||[]}function ke(t){if(!self.cheerio)return[t,{}];let e=self.cheerio.load(t),s={},r=!1;return e("script").each(function(){let n=e(this).attr("nonce");n&&(n in s||(s[n]=btoa(String.fromCharCode.apply(null,Array.from(crypto.getRandomValues(new Uint8Array(32)))))),e(this).attr("nonce",s[n]),r=!0)}),r?[e.html(),s]:[t,s]}function le(t){return crypto.subtle.importKey("raw",t,"AES-GCM",!0,["encrypt","decrypt"])}function ve(t,e,s){return crypto.subtle.encrypt({name:"AES-GCM",iv:e},t,s)}function fe(t){return crypto.getRandomValues(new Uint8Array(t||96))}function G(t,e,s,r,n){return c(this,null,function*(){return delete s["content-length"],delete s["last-modified"],new TextEncoder().encode(JSON.stringify({status:r,statusText:n,url:t,headers:s,body:yield I(e)}))})}function I(t){return new Promise((e,s)=>{if(!self.FileReader)e(String.fromCharCode.apply(null,new Uint16Array(t)));else{let r=new FileReader;r.onload=function(n){e(n.target.result)},r.onerror=function(n){s(n.target.error)},r.readAsBinaryString(new Blob([t],{type:"application/octet-stream"}))}})}function Be(t){return JSON.parse(new TextDecoder().decode(t))}function Oe(t,e,s){return crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,s)}function $(t){let e=t.length,s=new ArrayBuffer(e),r=new Uint8Array(s);for(let n=0;n<e;n++)r[n]=t.charCodeAt(n);return s}function pe(t){return crypto.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"])}function Fe(t,e){return crypto.subtle.sign("HMAC",t,e)}function Ae(t,e,s){return crypto.subtle.verify("HMAC",t,s,e)}function Ee(t){return c(this,null,function*(){if(!t.filter)return{};let e=t.filter.originpolicies||[];if(e.length==0)return{};let s={};for(let r of e){let n={},a={};if(r.matches&&(n||(n={}),r.matches instanceof Array?n.urls=r.matches:n=r.matches),r.exclude_matches&&(a||(a={}),r.exclude_matches instanceof Array?a.urls=r.exclude_matches:a=r.exclude_matches),!(!(yield p.matchListener(t,n,!0))||(yield p.matchListener(t,a,!1))))for(let o in r)["matches","exclude_matches","filter","xfilter"].indexOf(o)==-1&&(o in s||(s[o]=[]),s[o].push(r[o]))}return s})}function he(t,e,s,r){return c(this,null,function*(){return`
    let randomToken = (function () {
      if (location.href !== "${e}" && location.origin + '/' != "${s}")
        return;
      let _innerFunction = function() {
        if (location.origin + '/' == "${t}" || location.href == "${t}")
          return "${btoa(yield I(fe(r||32)))}";
        return null;
      }
      return function(){
        return _innerFunction();
      }
    })();
  `})}function M(t){return new Promise((e,s)=>{setTimeout(()=>{e(void 0)},t)})}var Re,W=P(()=>{"use strict";C();Re=ue});var ge={};U(ge,{Listener:()=>p});var O,p,C=P(()=>{"use strict";W();O=class{constructor(e,s,r,n){e&&(this.callback=e),s&&(this.filter=s),r&&(this.extra_options=r),n&&(this.xfilter=n)}execute(e){return c(this,null,function*(){if(!(yield O.matchListener(e,this.filter,!0))||(yield O.matchListener(e,this.xfilter,!1)))return e;let s=O.copyDetails(e,!1),r=yield O.constructDetails(s,this.extra_options),n=yield this.handleListener(r);return e.result=n,yield O.reconstructDetails(e)})}static copyDetails(e,s){let r={};if(e)for(let n in e)if(n=="response"&&e.response instanceof Response)try{s?r.response=e.response.clone():r.response=e.response}catch(a){console.error("ERROR CLONING RESPONSE",a),r.response=e.response}else if(n=="request"&&e.request instanceof Request)try{s?r.request=e.request.clone():r.request=e.request}catch(a){console.error("ERROR CLONING REQUEST",a),r.request=e.request}else r[n]=e[n];return r}handleListener(e){return c(this,null,function*(){let s={};if(this.callback&&typeof this.callback=="function"){let r=!0;if(this.extra_options&&this.extra_options.indexOf("non-blocking")>=0&&(r=!1),e&&(e.filter=this.filter||e.filter,e.extra_options=this.extra_options||[]),r)s=yield this.callback(e),s||(s={});else try{this.callback(e)}catch(n){}}if(this.extra_options){this.extra_options.includes("cancel")&&(s.cancel=!0);let r=this.extra_options.filter(n=>n.startsWith("next="));r.length>0&&(s.next=r[0].split("=")[1])}return s})}static constructDetails(e,s){return c(this,null,function*(){if(!e)return e;if(e.request){if(s){for(let r of s)if(r=="requestHeaders"&&!e.requestHeaders&&(e.requestHeaders=J(e.request)),r.startsWith("requestBody")&&!["get","head"].includes(e.request.method)&&!e.requestBody){let n=r.split("=")[1]||"text";e.requestBody=yield Re(e.request.clone(),n)}}e.url||(e.url=e.request.url)}if(e.response){if(s){for(let r of s)if(r=="responseHeaders"&&!e.responseHeaders&&(e.responseHeaders=J(e.response)),r.startsWith("responseBody")&&!e.responseBody){let n=r.split("=")[1]||"text";caches.default?e.responseBody=e.response.body:e.responseBody=yield ue(e.response.clone(),n)}}e.url||(e.url=e.response.url)}return e})}static reconstructDetails(e){return c(this,null,function*(){var s,r,n,a,o,i,u,f,h,x,S,v;return e&&e.result&&("response"in e.result&&(e.result.response==null||e.result.response==null)?(e.response=void 0,delete e.responseBody,delete e.responseHeaders):e.result.response?(e.response=e.result.response,delete e.responseBody,delete e.responseHeaders):e.result.responseHeaders&&e.result.responseBody?(e.response=new Response(e.result.responseBody,{headers:e.result.responseHeaders,status:e.response&&e.response.status||200,statusText:e.response&&e.response.statusText||"OK"}),delete e.responseHeaders,delete e.responseBody):e.result.responseBody?(e.response=new Response(e.result.responseBody,{headers:e.responseHeaders||e.response&&e.response.headers||{},status:e.response&&e.response.status||200,statusText:e.response&&e.response.statusText||"OK"}),delete e.responseBody):e.result.responseHeaders&&(e.response=new Response(e.response&&(yield e.response.arrayBuffer())||void 0,{headers:e.result.responseHeaders,status:e.response&&e.response.status||200,statusText:e.response&&e.response.statusText||"OK"}),delete e.responseHeaders),"request"in e.result&&(e.result.request==null||e.result.request==null)?(e.request=void 0,delete e.requestBody,delete e.requestHeaders):e.result.request?(e.request=e.result.request,delete e.requestBody,delete e.requestHeaders):e.result.requestHeaders&&e.result.requestBody?(e.request=new Request(e.request,{headers:e.result.requestHeaders,body:e.result.requestBody,referrer:(s=e.request)==null?void 0:s.referrer,mode:((r=e.request)==null?void 0:r.mode)=="navigate"||((n=e.request)==null?void 0:n.mode)=="no-cors"?"same-origin":(a=e.request)==null?void 0:a.mode}),delete e.requestHeaders,delete e.requestBody):e.result.requestHeaders?(e.request=new Request(e.request,{headers:e.result.requestHeaders,referrer:(o=e.request)==null?void 0:o.referrer,mode:((i=e.request)==null?void 0:i.mode)=="navigate"||((u=e.request)==null?void 0:u.mode)=="no-cors"?"same-origin":(f=e.request)==null?void 0:f.mode}),delete e.requestHeaders):e.result.requestBody&&(e.request=new Request(e.request,{body:e.result.requestBody,referrer:(h=e.request)==null?void 0:h.referrer,mode:((x=e.request)==null?void 0:x.mode)=="navigate"||((S=e.request)==null?void 0:S.mode)=="no-cors"?"same-origin":(v=e.request)==null?void 0:v.mode}),delete e.requestBody)),e})}static matchListener(e,s,r=!0){return c(this,null,function*(){if(!(e&&s&&(typeof s=="function"||typeof s=="object"&&Object.keys(s).length>0)))return r;if(typeof s=="function")return s.call(null,e);if("func"in s&&typeof s.func=="function"&&!s.func.call(null,e)||"online"in s&&s.online!=self.navigator.onLine)return!1;let{request:n,response:a}=e;if(n){if(s.modes){typeof s.modes=="string"&&(s.modes=[s.modes]);let o=!1;for(let i of s.modes)if(i=="<all_modes>"||n.mode&&i.toLowerCase()==n.mode.toLowerCase()){o=!0;break}if(!o)return!1}if(s.types){typeof s.types=="string"&&(s.types=[s.types]);let o=!1;for(let i of s.types)if(i=="<all_types>"||n.destination&&i.toLowerCase()==n.destination.toLowerCase()){o=!0;break}if(!o)return!1}if(s.origins){typeof s.origins=="string"&&(s.origins=[s.origins]);let o="";typeof URL!="function"?o=be(n.url):o=new URL(n.url).hostname;let i=s.topsite,u=!1;for(let f of s.origins){switch(f){case"<all_origins>":u=!0;break;case"same-origin":n.url.indexOf(self.location.origin+"/")==0&&(u=!0);break;case"cross-origin":n.url.indexOf(self.location.origin+"/")!=0&&(u=!0);break;case"same-site":i&&(i==o||o.endsWith("."+i))&&(u=!0);break;case"subdomains":(o==location.hostname||o.endsWith("."+location.hostname))&&(u=!0);break;default:break}if(u)break}if(!u)return!1}if(s.urls){typeof s.urls=="string"&&(s.urls=[s.urls]);let o=!1;for(let i of s.urls)if(i=="<all_urls>"||T(i).test(n.url)){o=!0;break}if(!o)return!1}if(s.methods){typeof s.methods=="string"&&(s.methods=[s.methods]);let o=!1;for(let i of s.methods)if(i=="<all_methods>"||n.method&&i.toLowerCase()==n.method.toLowerCase()){o=!0;break}if(!o)return!1}if(s["?"]){let o=new URL(n.url),i=!1;if(typeof s["?"]=="string")o.searchParams.has(s["?"])&&(i=!0);else if(s["?"]instanceof Array)for(let u of s["?"])if(o.searchParams.has(u))i=!0;else{i=!1;break}else if(typeof s["?"]=="object")for(let u in s["?"])if(o.searchParams.has(u)&&o.searchParams.get(u)==s["?"][u])i=!0;else{i=!1;break}else i=!1;if(!i)return!1}if(s["#"]){let o=new URL(n.url),i=!1;if(o.hash){let u=o.hash.slice(1);if(typeof s["#"]=="string")s["#"]==u&&(i=!0);else if(s["#"]instanceof Array){for(let f of s["#"])if(f==u){i=!0;break}}}if(!i)return!1}if(s["/"]){let o=new URL(n.url),i=!1;if(typeof s["/"]=="string")(s["/"]=="<all_paths>"||T(s["/"]).test(o.pathname))&&(i=!0);else if(s["/"]instanceof Array){for(let u of s["/"])if(u=="<all_paths>"||T(u).test(o.pathname)){i=!0;break}}if(!i)return!1}if(s.referers){typeof s.referers=="string"&&(s.referers=[s.referers]);let o=!1;for(let i of s.referers)if(i=="<all_urls>"||T(i).test(n.referrer)){o=!0;break}if(!o)return!1}if(s.clients&&e.event&&e.event.clientId){let o=yield self.clients.get(e.event.clientId);if(o&&o.url){let i=[],u=[];if(typeof s.clients=="string"?i=[s.clients]:s.clients instanceof Array?i=s.clients:typeof s.clients=="object"&&(s.clients.urls&&(typeof s.clients.urls=="string"?i=[s.clients.urls]:s.clients.urls instanceof Array&&(i=s.clients.urls)),s.clients.types&&(typeof s.clients.types=="string"?u=[s.clients.types]:s.clients.types instanceof Array&&(u=s.clients.types))),i.length>0){let f=!1;for(let h of i)if(h=="<all_urls>"||T(h).test(o.url)){f=!0;break}if(!f)return!1}if(u.length>0){let f=!1;for(let h of u)if(h=="<all_types>"||h==o.type){f=!0;break}if(!f)return!1}}}}if(a){if(s.rtypes){typeof s.rtypes=="string"&&(s.rtypes=[s.rtypes]);let o=!1;for(let i of s.rtypes)if(i=="<all_types>"||a.type&&i.toLowerCase()==a.type.toLowerCase()){o=!0;break}if(!o)return!1}if(s.statuses){let o=!1;if(typeof s.statuses=="number"&&a.status==s.statuses)o=!0;else for(let i of s.statuses)if(typeof i=="number"&&a.status==i){o=!0;break}else if(i instanceof Array&&i[0]<=a.status&&a.status<=i[1]){o=!0;break}if(!o)return!1}}return!0})}static matchListenerFilterFunctionNClients(e,s,r=!0){return c(this,null,function*(){if(!(e&&s&&(typeof s=="function"||typeof s=="object"&&Object.keys(s).length>0)))return r;if(typeof s=="function")return yield s.call(null,e);if("func"in s&&typeof s.func=="function"&&!(yield s.func.call(null,e)))return!1;let{request:n}=e;return!0})}hasListener(e){return this.callback==e}hasExtraOption(e){return this.extra_options?this.extra_options.includes(e):!1}},p=O;p.common_extra_options=["blocking","non-blocking","requestHeaders","responseHeaders","requestBody","responseBody","cancel","next","parallels"]});var Te={};U(Te,{Feature:()=>R});var xt,F,R,N=P(()=>{"use strict";D();({Listener:xt}=(C(),B(ge))),F=class{constructor(){}define(e,s,r,n,a,o){F.feature[e]=[s,n,a,o,r],F.features[e]=(i,u,f,h)=>{F.call(e,i,u,f,h)},this[e]=(i,u,f,h)=>{F.call(e,i,u,f,h)}}static call(e,s,r,n,a){let[o,i,u,f,h]=F.feature[e],x=a||h;if(!i)i=s;else if(s&&i)for(let S in s)i[S]=s[S];if(!f)f=n;else if(n&&f)for(let S in n)f[S]=n[S];if(typeof x=="string"&&(x=[x]),x instanceof Array)for(let S of x){let v=(r||u||[]).filter(K=>xt.common_extra_options.indexOf(K.split("=")[0])>=0);S in l.stages?l.stages[S].addListener(o,i,v,f):console.error(`Error with feature ${e}: the stage ${S} is not defined`)}}},R=F;R.feature={},R.features={}});var Ne={};U(Ne,{Stage:()=>l});var b,l,D=P(()=>{"use strict";C();N();b=class{constructor(e,s,r,n,a,o){this.name=e,this.listeners=[],this.nextStage=s,this.phase=n,this.endStage=r,this.parallels=a,this.defaultListeners=o||[],b.stages[e]=this}getNextStage(e){if(!b.disableNextStage)return typeof this.nextStage=="function"?this.nextStage(e):this.nextStage}addListener(e,s,r,n,a){let o=[];if(e)o.push(new p(e,s,r,n));else{let i=this.defaultListeners||[];for(let u of i)o.push(new p(u.callback,s,r,n))}if(r){for(let i of r)if(i in R.feature){let[u,f,h,x]=R.feature[i];o.push(new p(u,Object.assign({},f||{},s||{}),(r||[]).concat(h||[]),Object.assign({},x||{},n||{})))}}this.listeners||(this.listeners=[]);for(let i of o)a?this.listeners.unshift(i):this.listeners.push(i)}execute(e){return c(this,null,function*(){let s=e.disableNextAndParallelLinking||!1,r=this.listeners;r=r.concat(this.defaultListeners||R.feature[this.name]||[]);for(let a of r)if(e=yield a.execute(e),e.result){let o=e.result.cancel||!1,i=e.result.next||null,u=e.result.parallels;if(delete e.result,u&&!s&&b.handleParallelStages(u,p.copyDetails(e,!0)),o&&(i=this.endStage),i&&!s)return!b.disableNextStage&&i in b.stages?b.stages[i].execute(e):e}this.parallels&&!s&&b.handleParallelStages(this.parallels,p.copyDetails(e,!0));let n=this.getNextStage(e);return n&&!b.disableNextStage&&!s&&n in b.stages?b.stages[n].execute(e):e})}static handleParallelStages(e,s){if(b.disableParallelStages)return;let r={};if(e instanceof Array)for(let o of e)r[o]=null;else typeof e=="string"?r[e]=null:r=e;let n=Object.keys(r).length,a=1;for(let o in r)try{let i;o in b.stages?(n==a?b.stages[o].execute(s):b.stages[o].execute(p.copyDetails(s,!0)),a+=1):console.error(`The Stage ${o} does not exist. We do not know how to handle it`)}catch(i){}}hasListeners(){return this.listeners.length>0}hasListener(e){for(let s of this.listeners)if(s.hasListener(e))return!0;return!1}hasExtraOption(e){for(let s of this.listeners)if(s.hasExtraOption(e))return!0;return!1}removeListener(e){for(let s=this.listeners.length;s>=0;s--)this.listeners[s].hasListener(e)&&this.listeners.splice(s,1);return!0}},l=b;l.stages={},l.disableParallelStages=!1,l.disableNextStage=!1,l.cachedeleteOnIssue=!1});function He(t,e,s,r){return r||(r="url"),new Promise((n,a)=>{let o,i=null;e?o=indexedDB.open(t,e):o=indexedDB.open(t),o.onsuccess=function(u){i=o.result,i.transaction([t],"readwrite").objectStore(t).add(s),n(o.result)},o.onupgradeneeded=function(u){i=u.target.result,i.createObjectStore(t,{keyPath:r})}})}function Ue(t,e,s,r){return r||(r="url"),new Promise((n,a)=>{let o,i=null;e?o=indexedDB.open(t,e):o=indexedDB.open(t),o.onsuccess=function(u){i=o.result;let f=i.transaction([t],"readwrite").objectStore(t).get(s);f.onsuccess=function(h){n(f.result)},f.onerror=function(h){n(h)}},o.onupgradeneeded=function(u){t&&r&&u.target.result.createObjectStore(t,{keyPath:r})}})}function Ie(t,e,s){return new Promise((r,n)=>{let a,o=null;e?a=indexedDB.open(t,e):a=indexedDB.open(t),a.onsuccess=function(i){o=a.result;let u=o.transaction([t],"readwrite").objectStore(t).delete(s);u.onsuccess=function(f){r(u.result)},u.onerror=function(f){r(f)}}})}function Me(t){return new Promise((e,s)=>{var r=indexedDB.deleteDatabase(t);r.onerror=function(n){s(n)},r.onsuccess=function(n){e(n)}})}function z(t,e){return c(this,null,function*(){let s={body:yield t.arrayBuffer(),status:t.status,statusText:t.statusText,url:e,headers:{}},r={};for(let n of t.headers.entries())r[n[0]]=n[1];return s.headers=r,s})}function We(t){return c(this,null,function*(){return new Response(t.body,{headers:t.headers,status:t.status,statusText:t.statusText})})}var de=P(()=>{"use strict"});var q,y,g,je,k=P(()=>{"use strict";D();de();q={},y={},g={},je={};q.cacheMatch=t=>c(void 0,null,function*(){let e;if(t.request){if(t.filter&&t.filter.usememory&&t.request.url in je)e=je[t.request.url];else if(caches.default)e=yield caches.default.match(t.request);else if(t.filter&&t.filter.storage=="indexedDB"){let s=t.filter&&t.filter.caches||(yield indexedDB.databases()).map(r=>r.name);for(let r of s)if(e=yield Ue(r,null,t.request.url),e){e=yield We(e);break}}else{let s=t.filter&&t.filter.caches||[];if(s.length==0||s.indexOf("<all_caches>")>=0)e=yield caches.match(t.request);else for(let r of s)if(e=yield(yield caches.open(r)).match(t.request),e)break}try{swebRequest.LoggingApis("cache.match",JSON.stringify([t.request.url,t.request.destination,t.request.mode,e?e.type:""]))}catch(s){}}if(e){try{t.event.responsefrom="cache"}catch(s){}return{response:e,next:"onCacheMatchSuccess"}}else return{}});q.cachePut=t=>c(void 0,null,function*(){let e=!1;if(t.request&&t.response){if(caches.default)try{yield caches.default.put(t.request.clone(),new Response(t.response.body,t.response)),e=!0}catch(s){console.error("Error writting content in cache with Cloudflare Workers",s)}else{let s=t.filter&&t.filter.caches||[],r=s.indexOf("<all_caches>")>=0,n=t.filter&&t.filter.storage=="indexedDB";(s.length==0||r)&&(n?s=(yield indexedDB.databases()).map(a=>a.name):s=yield caches.keys()),s.length==0?s=["cache_"+Math.random()]:r||(s=s.slice(0,1));for(let a of s)if(n)try{yield He(a,null,yield z(t.response.clone(),t.request.url)),e=!0}catch(o){}else{let o=yield caches.open(a);try{yield o.put(t.request.clone(),t.response.clone()),e=!0}catch(i){}}}try{swebRequest.LoggingApis("cache.put",JSON.stringify([t.request.url,t.request.destination,t.request.mode,t.response.type]))}catch(s){}}return e?{next:"onCachePutCompleted"}:{}});q.cacheAddAll=t=>c(void 0,null,function*(){let e=[];if(t.filter&&t.filter.assets&&t.filter.assets.length>0)for(let s of t.filter.assets){let r={filter:t.filter,request:new Request(s),response:void 0,phase:"install"};e.push(l.stages.onBeforeFetchRequest.execute(r))}try{return yield Promise.all(e),Promise.resolve({})}catch(s){return Promise.reject({})}});q.cacheDelete=t=>c(void 0,null,function*(){if(t&&t.request){let e=t.filter&&t.filter.assets||[],s=t.filter&&t.filter.storage=="indexedDB",r=t.filter&&t.filter.caches||[];s&&(r=(yield indexedDB.databases()).map(n=>n.name)),r.indexOf("<all_caches>")>=0&&(r=yield caches.keys());for(let n=0;n<e.length;n++)e[n]=new URL(e[n],self.origin).href;for(let n of r)if(e.length==0)s?yield Me(n):yield caches.delete(n);else if(s)for(let a of e)yield Ie(n,null,a);else{let a=yield caches.open(n);for(let o of yield a.keys())e.indexOf(o.url)>=0&&(yield a.delete(o))}}return{}});y.cacheDeleteRequest=t=>c(void 0,null,function*(){let e=yield caches.keys();for(let s of e)yield(yield caches.open(s)).delete(t)});y.cachePut={apply:(t,e,s)=>c(void 0,null,function*(){try{swebRequest.LoggingApis("cache.put",s[0]instanceof Request?JSON.stringify([s[0].url,s[0].destination,s[0].mode,s[1].type]):JSON.stringify([s[0],null,null,s[1].type]))}catch(r){}try{s[0]instanceof Request||(s[0]=new Request(s[0]));let r={request:s[0],response:s[1],phase:"fetch"};r=yield l.stages.onBeforeCachePut.execute(r),r.request&&r.response&&t.apply(e,[r.request,r.response])}catch(r){}})};y.cacheAdd={apply:(t,e,s)=>{try{swebRequest.LoggingApis("cache.add",s[0])}catch(r){}fetch(s[0]).then(function(r){r&&r.ok&&e.put(s[0],r)})}};y.cacheAddAll={apply:(t,e,s)=>{try{swebRequest.LoggingApis("cache.addAll",JSON.stringify([s[0],null,null,null]))}catch(r){}for(let r of s[0])fetch(r).then(n=>{n&&n.ok&&e.put(r,n)})}};y.precaching=t=>c(void 0,null,function*(){let e=[];if(t.filter&&t.filter.assets&&t.filter.assets.length>0){let s=t.filter.caches||["cache_"+Math.random()];for(let r of s)yield(yield caches.open(r)).addAll(t.filter.assets)}return{}});y.Precaching=y.precaching;y.cacheMatch={apply:(t,e,s)=>{try{swebRequest.LoggingApis("cache.match",s[0]instanceof Request?JSON.stringify([s[0].url,s[0].destination,s[0].mode]):JSON.stringify([s[0]]))}catch(r){}return(()=>c(void 0,null,function*(){let r=s[0];r instanceof Request||(r=new Request(...s));let n={request:r.clone(),response:void 0,phase:"fetch"};if(n=yield l.stages.onBeforeCacheMatch.execute(n),n.request&&(n.response=yield t.apply(e,[n.request.clone()])),n.response){try{swebRequest.LoggingApis("cache.matches",JSON.stringify([r.url,r.destination,r.mode,n.response.type]))}catch(a){}n=yield l.stages.onCacheMatchSuccess.execute(n)}return!n.response&&l.cachedeleteOnIssue&&(e instanceof self.Cache?yield e.delete(r):yield y.cacheDeleteRequest(r)),n.response}))()}};y.cacheMatchAll={apply:function(t,e,s){try{swebRequest.LoggingApis("cache.matchAll",s[0]instanceof Request?JSON.stringify([s[0].url,s[0].destination,s[0].mode]):JSON.stringify([s[0]]))}catch(r){}return(()=>c(this,null,function*(){let r=s[0];r instanceof Request||(r=new Request(...s));let n={request:r,response:void 0,phase:"fetch"};n=yield l.stages.onBeforeCacheMatch.execute(n);let a=[];if(n.request){let o=yield t.apply(e,[n.request]);for(let i of o){try{swebRequest.LoggingApis("cache.matches",JSON.stringify([r.url,r.destination,r.mode,i.type]))}catch(u){}try{n.response=i,n=yield l.stages.onCacheMatchSuccess.execute(n),n.response?a.push(n.response):l.cachedeleteOnIssue&&(yield e.delete(r))}catch(u){}}}return a}))()}};g.caches={};g.indexedDB={};g.caches.matches=(t,e,s)=>c(void 0,null,function*(){let r={};t instanceof Request||typeof t=="string"?(r.request=t,typeof r.request=="string"&&(r.request=new Request(t)),e&&(r.filter={caches:[e]}),s&&(r.filter||(r.filter={}),r.filter.storage=s)):r=t,r.phase="fetch",r.disableNextAndParallelLinking=!0;try{return r=yield l.stages.onCacheMatch.execute(r),r.response&&!["opaque","opaqueredirect"].includes(r.response.type)?r=yield l.stages.onCacheMatchSuccess.execute(r):(!r.response||r.response.type=="error")&&(r=yield l.stages.onCacheMatchError.execute(r)),r.response}catch(n){}});g.caches.put=(t,e,s,r)=>c(void 0,null,function*(){let n={};t instanceof Request||typeof t=="string"?(n.request=t,n.response=e,typeof n.request=="string"&&(n.request=new Request(n.request)),n.response instanceof Response||(n.response=new Response(n.response)),s&&(n.filter={caches:[s]}),r&&(n.filter||(n.filter={}),n.filter.storage=r)):n=t,n.phase="fetch",n.disableNextAndParallelLinking=!0;try{n=yield l.stages.onBeforeCachePut.execute(n),n=yield l.stages.onBeforeCachePut.execute(n),n=yield l.stages.onCachePutCompleted.execute(n)}catch(a){}});g.caches.add=t=>c(void 0,null,function*(){try{yield g.caches.put(t,yield g.fetch(t))}catch(e){}});g.cacheMatch=(t,e,s)=>c(void 0,null,function*(){t instanceof Request||(t=new Request(new Request(t)));let r={request:t,phase:"fetch",disableNextAndParallelLinking:!0};e&&(r.filter={caches:[e]}),s&&(r.filter||(r.filter={}),r.filter.storage=s);try{return r=yield l.stages.onCacheMatch.execute(r),r.response&&!["opaque","opaqueredirect"].includes(r.response.type)&&(r=yield l.stages.onCacheMatchSuccess.execute(r)),r.response}catch(n){}});g.cachePut=(t,e,s,r)=>c(void 0,null,function*(){return g.caches.put(t,e,s,r)});g.idbwrite=function(t,e,s){return c(this,null,function*(){return g.caches.put(t,e,s,"indexedDB")})};g.idbread=(t,e)=>c(void 0,null,function*(){return g.caches.match(t,e,"indexedDB")});g.cacheread=g.cacheMatch;g.cachewrite=g.cachePut});var j,_e=P(()=>{"use strict";j=["fetch","install","activate","message","push","sync","periodicsync","notificationclick","notificationclose","pushsubscriptionchange"]});var Ke=dt(V=>{"use strict";_e();C();D();k();function bt(t){return new Promise((e,s)=>{setTimeout(()=>{e(void 0)},t)})}function St(t){return c(this,null,function*(){try{return yield fetch(t)}catch(e){}})}function Ct(t,e){return c(this,null,function*(){return Promise.any([St(t),bt(e)])})}q.concurrentCacheFetch=t=>c(V,null,function*(){let e=p.copyDetails(t),s=p.copyDetails(t),r=g.caches.match(e),n=g.fetch(s);return Promise.any([r,n])});q.fetchRequest=t=>c(V,null,function*(){let e;if(t.request){try{try{t.filter&&t.filter.navigationPreload&&((yield self.registration.navigationPreload.getState()).enabled||(yield self.registration.navigationPreload.enable())),t.event&&t.event.preloadResponse&&(e=yield t.event.preloadResponse)}catch(s){console.error("ERROR ",s)}e||(t.filter&&t.filter.timeout?e=yield Ct(t.request.clone(),t.filter.timeout):e=yield fetch(t.request.clone()))}catch(s){}try{swebRequest.LoggingApis("fetch",JSON.stringify([t.request.url,t.request.destination,t.request.mode,t.request.credentials,e?e.type:""]))}catch(s){}}if(e){try{t.event.responsefrom="network"}catch(s){}return{response:e,next:"onFetchRequestSuccess"}}else return{response:e,next:"onFetchRequestError"}});y.fetchRequest={apply:function(t,e,s){let r=s[0];if(r instanceof Request&&r.cache==="only-if-cached"&&r.mode!=="same-origin")return t.apply(e,s);r instanceof Request||(r=new Request(...s));try{swebRequest.LoggingApis("fetch",JSON.stringify([r.url,r.destination,r.mode,r.credentials]))}catch(n){}return function(){return c(this,null,function*(){let n={request:r,response:void 0,phase:"fetch"};try{n=yield l.stages.onBeforeFetchRequest.execute(n),n.request&&(r=n.request),n.response=yield t.apply(e,[r.clone()]);try{swebRequest.LoggingApis("fetches",JSON.stringify([r.url,r.destination,r.mode,r.credentials,n.response?n.response.type:""]))}catch(a){}return n=yield l.stages.onFetchRequestSuccess.execute(n),n.response}catch(a){console.error("ERROR",a,s,n)}})}()}};y.fetchEventRespondWith={apply:function(t,e,s){return t.apply(e,[function(){return c(this,null,function*(){let r=s[0];s[0]instanceof Response||(r=yield s[0]);try{swebRequest.LoggingApis("fetchEvent.respondWith",JSON.stringify([e.request.url,e.request.destination,e.request.mode,r.type]))}catch(a){}let n={request:e.request,response:r,event:e,phase:"fetch"};return n=yield l.stages.onRequestCompleted.execute(n),n.response})}()])}};y.addEventListenerFetch={apply:function(t,e,s){try{swebRequest.LoggingApis("registered.self."+s[0],s[0])}catch(r){}if(!(s&&s[0]&&j.indexOf(s[0].toLowerCase())>=0))return t.apply(e,s);if(s[0].toLowerCase()=="fetch"){function r(n){return c(this,null,function*(){try{swebRequest.LoggingApis("self."+s[0],JSON.stringify([n.request.url,n.request.destination,n.request.mode]))}catch(a){}try{let a={request:n.request,phase:"fetch",event:n};if(a=yield l.stages.onRequestReceived.execute(a),"response"in a)try{n.respondWith(a.response||new Response);return}catch(o){}}catch(a){}switch(typeof s[1]){case"function":return s[1](n);case"object":if(s[1].handleEvent)return s[1].handleEvent(n);break;default:break}})}return t.apply(e,[s[0],r,s[2]||!1])}else if(j.indexOf(s[0].toLowerCase())>=0){let r={};for(let a of j){let o=a[0].toUpperCase()+a.slice(1);r[a]=["onBefore"+o,"on"+o,"on"+o+"Completed"]}function n(a){return c(this,null,function*(){try{for(let o of r[s[0].toLowerCase()]){let i={phase:s[0].toLowerCase(),event:a};for(let f of["data","source","origin","notification","tag","action","oldSubscription"])f in a&&(i[f]=a[f]);let u=l.stages[o].execute(i);a&&a.waitUntil&&a.waitUntil(u)}}catch(o){}switch(typeof s[1]){case"function":return s[1](a);case"object":if(s[1].handleEvent)return s[1].handleEvent(a);break;default:break}})}return t.apply(e,[s[0],n,s[2]||!1])}}};y.onfetchListener=()=>{for(let t of j)Object.defineProperty(self,"on"+t,{set(e){self.addEventListener(t,e)},enumerable:!0,configurable:!0})};g.fetch=t=>c(V,null,function*(){let e;if(t instanceof Request||typeof t=="string"?(e=t,e instanceof Request||(e=new Request(e))):e=t.request,!e)return Response.error();if(e.cache==="only-if-cached"&&e.mode!=="same-origin")return fetch(e);try{let s={request:e,response:void 0,phase:"fetch",disableNextAndParallelLinking:!0};return s=yield l.stages.onBeforeFetchRequest.execute(s),s=yield l.stages.onFetchRequest.execute(s),s.response&&!["opaque","opaqueredirect"].includes(s.response.type)?s=yield l.stages.onFetchRequestSuccess.execute(s):(!s.response||s.response.type=="error")&&(s=yield l.stages.onFetchRequestError.execute(s)),s.response}catch(s){}return Response.error()})});var tt={};U(tt,{LoggingSWSAPIs:()=>et});function Ut(t,e,s){try{t[e]=new Proxy(t[e],{apply:function(r,n,a){try{e=="importScripts"||e=="redirect"?swebRequest.LoggingApis(s,a):swebRequest.LoggingApis(s,e)}catch(o){}return r.apply(n,a)}})}catch(r){}}function et(){let t={"self.skipWaiting":[self,"skipWaiting"],"self.Clients.prototype.claim":[self.Clients.prototype,"claim"],"self.navigationPreload.enable":[self.NavigationPreloadManager.prototype,"enable"],"self.importScripts":[self,"importScripts"],"self.SubtleCrypto.prototype.encrypt":[self.SubtleCrypto.prototype,"encrypt"],"self.SubtleCrypto.prototype.decrypt":[self.SubtleCrypto.prototype,"decrypt"],"self.SubtleCrypto.prototype.sign":[self.SubtleCrypto.prototype,"sign"],"self.SubtleCrypto.prototype.verify":[self.SubtleCrypto.prototype,"verify"],"self.Response.redirect":[self.Response,"redirect"],"self.WebAssembly.compile":[self.WebAssembly,"compile"]};for(let e in t)Ut(t[e][0],t[e][1],e)}var Ht,st=P(()=>{"use strict";Ht="border-radius: 25% 10%; font-size: 15px; font-weight: bold; background-color: gray; word-break: break-word;";swebRequest.LoggingFeatures=function(t,e){if(swebRequest.FEATURESLOGGING)try{console.error(["swebRequest",location.origin,t,self.navigator.onLine,e])}catch(s){}console.info("%c %s",Ht,t," on",e)};swebRequest.LoggingApis=function(t,e){if(swebRequest.APISLOGGING)try{console.error(["prowsebox",location.origin,t,self.navigator.onLine,e])}catch(s){}};swebRequest.enableLogging=function(t=!0,e=!0){swebRequest.FEATURESLOGGING=t,swebRequest.APISLOGGING=e,e&&et();try{swebRequest.LoggingApis("sws",[location.href,self.registration.scope])}catch(s){}}});var lt={};U(lt,{CacheAndRevalidate:()=>rt,CacheFirst:()=>ot,CacheOnly:()=>ct,NetworkFirst:()=>at,NetworkFirstTimeout:()=>it,NetworkOnly:()=>ut,Precaching:()=>xe,StaleWhileRevalidate:()=>we,precaching:()=>nt});function ot(t){return c(this,null,function*(){try{if(!t.event)return;let e=yield caches.match(t.event.request);if(e)return e;let s=yield fetch(t.event.request.clone()),r=s.clone();return(yield caches.open(t.cacheName||"cache_version_"+Math.random())).put(t.event.request,r).then(()=>{}).catch(()=>{}),s}catch(e){}})}function we(t){return c(this,null,function*(){return new Promise((e,s)=>c(this,null,function*(){try{if(!t.event)return;let r=yield caches.match(t.event.request);r&&e(r);let n=yield fetch(t.event.request.clone());r||e(n.clone()),(yield caches.open(t.cacheName||"cache_version_"+Math.random())).put(t.event.request,n).then(()=>{}).catch(()=>{})}catch(r){console.log("ERROR STALING",r)}}))})}function at(t){return c(this,null,function*(){try{if(!t.event)return;let e=yield fetch(t.event.request.clone());if(e){let s=e.clone();return(yield caches.open(t.cacheName||"cache_version_"+Math.random())).put(t.event.request,s).then(()=>{}).catch(()=>{}),e}}catch(e){}return yield caches.match(t.event.request)})}function it(t){return c(this,null,function*(){try{if(!t.event)return;let e=(yield q.fetchRequest({request:t.event.request.clone(),timeout:t.timeout||0})).response;if(e){let s=e.clone();return(yield caches.open(t.cacheName||"cache_version_"+Math.random())).put(t.event.request,s).then(()=>{}).catch(()=>{}),e}}catch(e){console.error("ERROR",e)}return yield caches.match(t.event.request)})}function ct(t){return c(this,null,function*(){try{if(!t.event)return;let e=yield caches.match(t.event.request);if(e)return e}catch(e){console.log("ERROR CACHE ONLY",e)}return new Response})}function ut(t){return c(this,null,function*(){try{if(t.event)return yield fetch(t.event.request)}catch(e){}})}function xe(t){return c(this,null,function*(){return(yield caches.open(t.cacheName||"cache_version_"+Math.random())).addAll(t.assets||[])})}var rt,nt,ft=P(()=>{"use strict";k();rt=we,nt=xe;swebRequest.commons.strategy={CacheFirst:ot,CacheOnly:ct,NetworkFirst:at,NetworkOnly:ut,StaleWhileRevalidate:we,CacheAndRevalidate:rt,Precaching:xe,precaching:nt,NetworkFirstTimeout:it}});var It={};var pt=P(()=>{"use strict";N();swebRequest.commons.feature=function(t){return R.feature[t][0]}});D();var ye=class{constructor(e,s,r,n){this.stage={};this.name=e,this.stages=n,this.startStage=s,this.endStage=r,ye.phases[e]=this}init(){for(let e in this.stages){let s=this.stages[e];this.stage[e]=new l(e,s.nextStage,this.endStage,this.name,s.parallelStages,s.defaultListeners)}this.addDefaultListeners()}execute(e){return l.stages[this.startStage].execute(e)}stand(e){e?this.standalone():this.standalong()}setupDefaultListeners(){}addDefaultListeners(){}standalone(){this.setupDefaultListeners()}standalong(){this.disableParallelStages()}disableNextStages(){for(let e in this.stages)this.stages[e].nextStage=null}disableParallelStages(){for(let e in this.stages)this.stages[e].parallelStages=null;l.disableParallelStages=!0}},d=ye;d.phases={};C();D();k();Ke();var Dt={onRequestReceived:{nextStage:"onBeforeCacheMatch"},onBeforeCacheMatch:{nextStage:"onCacheMatch"},onCacheMatch:{nextStage:t=>t.response?"onCacheMatchSuccess":"onCacheMatchError"},onCacheMatchSuccess:{nextStage:"onRequestCompleted"},onCacheMatchError:{nextStage:"onBeforeFetchRequest"},onBeforeFetchRequest:{nextStage:"onFetchRequest"},onFetchRequest:{nextStage:t=>t.response?"onFetchRequestSuccess":"onFetchRequestError"},onFetchRequestSuccess:{nextStage:"onRequestCompleted",parallelStages:"onBeforeCachePut"},onFetchRequestError:{nextStage:"onResponseError"},onResponseError:{nextStage:"onRequestCompleted"},onBeforeCachePut:{nextStage:"onCachePut"},onCachePut:{nextStage:"onCachePutCompleted"},onCachePutCompleted:{nextStage:null},onRequestCompleted:{nextStage:null}},Y=class extends d{constructor(){super("fetch","onRequestReceived","onRequestCompleted",Dt),this.init()}addDefaultListeners(){l.stages.onCacheMatch.defaultListeners=[new p(q.cacheMatch)],l.stages.onFetchRequest.defaultListeners=[new p(q.fetchRequest)],l.stages.onCachePut.defaultListeners=[new p(q.cachePut)]}setupDefaultListeners(){}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.respondWith(new Promise((s,r)=>{this.execute({request:e.request,response:void 0,phase:this.name,event:e}).then(n=>{var a;try{console.log("RESPONSE TO ",(a=n.request)==null?void 0:a.url," COMES FROM",n.event.responsefrom)}catch(o){}s(n&&n.response||new Response)}).catch(r)}))})}standalong(){super.standalong(),l.cachedeleteOnIssue=!0,self.fetch=new Proxy(self.fetch,y.fetchRequest),self.Cache.prototype.put=new Proxy(self.Cache.prototype.put,y.cachePut),self.Cache.prototype.add=new Proxy(self.Cache.prototype.add,y.cacheAdd),self.Cache.prototype.addAll=new Proxy(self.Cache.prototype.addAll,y.cacheAddAll),self.Cache.prototype.match=new Proxy(self.Cache.prototype.match,y.cacheMatch),self.CacheStorage.prototype.match=new Proxy(self.CacheStorage.prototype.match,y.cacheMatch),self.Cache.prototype.matchAll=new Proxy(self.Cache.prototype.matchAll,y.cacheMatchAll),self.FetchEvent.prototype.respondWith=new Proxy(self.FetchEvent.prototype.respondWith,y.fetchEventRespondWith),self.EventTarget.prototype.addEventListener=new Proxy(self.EventTarget.prototype.addEventListener,y.addEventListenerFetch),y.onfetchListener()}};D();C();k();var Pt={onBeforeInstall:{nextStage:"onInstall"},onInstall:{nextStage:"onInstallCompleted"},onInstallCompleted:{nextStage:null}},Q=class extends d{constructor(){super("install","onBeforeInstall","onInstallCompleted",Pt),this.init()}addDefaultListeners(){l.stages.onInstall.defaultListeners=[new p(q.cacheAddAll)]}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,event:e}))})}standalong(){super.standalong(),l.cachedeleteOnIssue=!0,l.stages.onInstall.defaultListeners=[new p(y.precaching)]}};C();k();D();var kt={onBeforeActivate:{nextStage:"onActivate"},onActivate:{nextStage:"onActivateCompleted"},onActivateCompleted:{nextStage:null}},X=class extends d{constructor(e){super("activate","onBeforeActivate","onActivateCompleted",kt),this.init()}addDefaultListeners(){l.stages.onActivate.defaultListeners=[new p(q.cacheDelete)]}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,event:e}))})}standalong(){}};C();D();k();de();var A={};A.prepostmessage=t=>c(void 0,null,function*(){return t.event.data&&t.event.data.from=="swebRequest"&&("request"in t.event.data&&"url"in t.event.data.request&&(t.event.data.request=new Request(t.event.data.request.url,t.event.data.request.init)),"response"in t.event.data&&"body"in t.event.data.response&&(t.event.data.response=new Response(t.event.data.response.body,{headers:t.event.data.response.headers||{},status:t.event.data.response.status||0,statusText:t.event.data.response.statusText||"OK"}))),t});A.onpostmessage=t=>c(void 0,null,function*(){if(!(t.event.data&&t.event.data.from=="swebRequest"))return t;let e=t.event.data.request||t.event.data.url,s=t.event.data.response||new Response(t.event.data.data||t.event.data.body);switch(t.event.data.type){case"fetch":t.response=yield g.fetch(e,t.event.data.direct);break;case"cacheread":t.response=yield g.cacheMatch(e,t.event.data.cachename);break;case"cachewrite":break;case"fetchncachewrite":break;case"idbread":t.response=yield g.idbread(e,t.event.data.dbname);break;case"idbwrite":break;case"fetchnidbwrite":break;default:break}return t});A.postpostmessage=t=>c(void 0,null,function*(){return t.event.data&&t.event.data.from=="swebRequest"&&"response"in t?{response:yield z(t.response)}:t});var vt={onBeforeMessage:{nextStage:"onMessage"},onMessage:{nextStage:"onMessageCompleted"},onMessageCompleted:{nextStage:null}},Z=class extends d{constructor(e){super("message","onBeforeMessage","onMessageCompleted",vt),this.init()}setupDefaultListeners(){l.stages.onBeforeMessage.listeners=[new p(A.prepostmessage)],l.stages.onMessage.listeners=[new p(A.onpostmessage)],l.stages.onMessageCompleted.listeners=[new p(A.postpostmessage)]}standalone(){super.standalone(),self.addEventListener(this.name,e=>{console.info(e),e.data&&e.data.from=="swebRequest"&&e.stopImmediatePropagation(),e.waitUntil(new Promise((s,r)=>{this.execute({phase:this.name,data:e.data,source:e.source,origin:e.origin,event:e}).then(n=>{n&&n.response&&e.source.postMessage({id:e.data.id,response:n.response},e.source),s(n)}).catch(r)}))})}standalong(){}};var Bt={onBeforePush:{nextStage:"onPush"},onPush:{nextStage:"onPushCompleted"},onPushCompleted:{nextStage:null}},ee=class extends d{constructor(e){super("push","onBeforePush","onPushCompleted",Bt),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(new Promise((s,r)=>{this.execute({phase:this.name,data:e.data,event:e}).then(n=>{if(n&&n.notification)try{let a={};for(let i in n.notification)i!="title"&&i!="url"&&(a[i]=n.notification[i]);let o=new self.Notification(n.notification.title,a);n.notification.url&&o.addEventListener("click",()=>{self.clients.openWindow(n.notification.url)}),self.registration.showNotification(o).then(()=>{}).catch(()=>{})}catch(a){}s(n)}).catch(r)}))})}standalong(){}};var Ot={onBeforeSync:{nextStage:"onSync"},onSync:{nextStage:"onSyncCompleted"},onSyncCompleted:{nextStage:null}},te=class extends d{constructor(e){super("sync","onBeforeSync","onSyncCompleted",Ot),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,tag:e.data,event:e}))})}standalong(){}};var Ft={onBeforePeriodicSync:{nextStage:"onPeriodicSync"},onPeriodicSync:{nextStage:"onPeriodicSyncCompleted"},onPeriodicSyncCompleted:{nextStage:null}},se=class extends d{constructor(e){super("periodicsync","onBeforePeriodicSync","onPeriodicSyncCompleted",Ft),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,data:e.data,event:e}))})}standalong(){}};var At={onBeforeNotificationClick:{nextStage:"onNotificationClick"},onNotificationClick:{nextStage:"onNotificationClickCompleted"},onNotificationClickCompleted:{nextStage:null}},re=class extends d{constructor(e){super("notificationclick","onBeforeNotificationClick","onNotificationClickCompleted",At),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,action:e.action,notification:e.notification,tag:e.notification.tag,event:e}))})}standalong(){}};var Et={onBeforeNotificationClose:{nextStage:"onNotificationClose"},onNotificationClose:{nextStage:"onNotificationCloseCompleted"},onNotificationCloseCompleted:{nextStage:null}},ne=class extends d{constructor(e){super("notificationclose","onBeforeNotificationClose","onNotificationCloseCompleted",Et),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{this.execute({phase:this.name,action:e.action,notification:e.notification,event:e}).then(()=>{}).catch(()=>{})})}standalong(){}};var Lt={onBeforePushSubscriptionChange:{nextStage:"onPushSubscriptionChange"},onPushSubscriptionChange:{nextStage:"onPushSubscriptionChangeCompleted"},onPushSubscriptionChangeCompleted:{nextStage:null}},oe=class extends d{constructor(e){super("pushsubscriptionchange","onBeforePushSubscriptionChange","onPushSubscriptionChangeCompleted",Lt),this.init()}standalone(){super.standalone(),self.addEventListener(this.name,e=>{e.waitUntil(this.execute({phase:this.name,oldSubscription:e.oldSubscription,event:e}))})}standalong(){}};N();var{Feature:Je}=(N(),B(Te)),{Listener:Tt}=(C(),B(ge)),{Stage:_}=(D(),B(Ne)),E=class{define(e,s){E.strategy[e]=s,E.strategies[e]=(r,n,a,o)=>{E.call(e,r,n,a)},this[e]=(r,n,a,o)=>{E.call(e,r,n,a)}}static call(e,s,r,n){let a=E.strategy[e],o=[],i={};if(r)for(let u of r)Tt.common_extra_options.includes(u)&&u.startsWith("next=")?o.push(u):u in Je.feature&&(i[u]="");if(a instanceof Array)for(let u of a)for(let f of _.stages[u].defaultListeners)_.stages[u].addListener(f.callback,s,o,n);else for(let u in a)if(a[u])_.stages[u].addListener(a[u],s,o,n);else for(let f of _.stages[u].defaultListeners)_.stages[u].addListener(f.callback,s,o,n);for(let u in i)Je.call(u,s,o,n)}},H=E;H.strategy={},H.strategies={};W();var Ge=()=>{swebRequest.strategies.define("cacheFirst",["onCacheMatch","onFetchRequest","onCachePut"]),swebRequest.strategies.define("cacheOnly",{onCacheMatchError:()=>({next:"onResponseError"})}),swebRequest.strategies.define("networkOnly",{onRequestReceived:()=>({next:"onBeforeFetchRequest"}),onBeforeCachePut:()=>({next:"onCachePutCompleted"})}),swebRequest.strategies.define("cacheAndRevalidate",{onCacheMatchSuccess:()=>({parallels:["onBeforeFetchRequest"]})}),swebRequest.strategies.define("networkFirst",{onRequestReceived:()=>({next:"onBeforeFetchRequest"}),onFetchRequestError:()=>({next:"onBeforeCacheMatch"}),onCacheMatchError:()=>({next:"onResponseError"}),onFetchRequest:null}),swebRequest.strategies.define("networkFirstTimeout",{onRequestReceived:()=>({next:"onBeforeFetchRequest"}),onFetchRequestError:()=>({next:"onBeforeCacheMatch"}),onCacheMatchError:()=>({next:"onResponseError"}),onFetchRequest:null}),swebRequest.strategies.define("networkOrCache",{onRequestReceived:()=>({next:"onBeforeFetchRequest",parallels:["onBeforeCacheMatch"]}),onFetchRequestError:t=>c(void 0,null,function*(){return t.filter&&t.filter.timeout&&(yield M(t.filter.timeout)),{next:"onResponseError"}}),onCacheMatchError:t=>c(void 0,null,function*(){return t.filter&&t.filter.timeout&&(yield M(t.filter.timeout)),{next:"onResponseError"}})}),swebRequest.strategies.define("cacheOrNetwork",{onRequestReceived:()=>({next:"onBeforeCacheMatch",parallels:["onBeforeFetchRequest"]}),onFetchRequestError:t=>c(void 0,null,function*(){return t.filter&&t.filter.timeout&&(yield M(t.filter.timeout)),{next:"onResponseError"}}),onCacheMatchError:t=>c(void 0,null,function*(){return t.filter&&t.filter.timeout&&(yield M(t.filter.timeout)),{next:"onResponseError"}})}),swebRequest.strategies.CacheFirst=swebRequest.strategies.cacheFirst,swebRequest.strategies.NetworkFirst=swebRequest.strategies.networkFirst,swebRequest.strategies.CacheOnly=swebRequest.strategies.cacheOnly,swebRequest.strategies.NetworkOnly=swebRequest.strategies.networkOnly,swebRequest.strategies.CacheAndRevalidate=swebRequest.strategies.cacheAndRevalidate,swebRequest.strategies.StaleWhileRevalidate=swebRequest.strategies.cacheAndRevalidate,swebRequest.strategies.staleWhileRevalidate=swebRequest.strategies.cacheAndRevalidate,swebRequest.strategies.NetworkFirstTimeout=swebRequest.strategies.networkFirstTimeout,swebRequest.strategies.NetworkOrCache=swebRequest.strategies.networkOrCache,swebRequest.strategies.CacheOrNetwork=swebRequest.strategies.cacheOrNetwork,swebRequest.strategies.NetworkOrCache=swebRequest.strategies.networkOrCache,swebRequest.strategies.concurrentCacheOrNetwork=swebRequest.strategies.cacheOrNetwork,swebRequest.strategies.ConcurrentCacheOrNetwork=swebRequest.strategies.cacheOrNetwork,swebRequest.strategies.concurrentNetworkOrCache=swebRequest.strategies.networkOrCache,swebRequest.strategies.ConcurrentNetworkOrCache=swebRequest.strategies.networkOrCache,swebRequest.strategies.define("precaching",["onBeforeInstall","onInstall","onInstallCompleted"]),swebRequest.strategies.define("cleanup",["onBeforeActivate","onActivate","onActivateCompleted"]),swebRequest.strategies.define("postMessage",["onBeforeMessage","onMessage","onMessageCompleted"])};W();function $e(t){if(self.wasmsqwr)try{let e=self.wasmsqwr.refresh_csp_nonces(new Uint8Array(t)).split(",,,,,"),s={};for(let r of e[0].split(",")){let n=r.split(":");s[n[0]]=n[1]}return[e[1],s]}catch(e){}return[t,{}]}function ze(t,e,s,r){if(e.length==0||!self.wasmsqwr)return t;s||(s=!1);try{return self.wasmsqwr.prependscripts(new Uint8Array(t),[{src_or_content:e.length==1?e[0]:e.join(",,,,,"),inline:s||!1,prepend:!0,nonce:r||""}])}catch(n){}return t}function Ve(t,e,s,r){if(e.length==0||!self.wasmsqwr)return t;s||(s=!1);try{return self.wasmsqwr.appendscripts(new Uint8Array(t),[{src_or_content:e.length==1?e[0]:e.join(",,,,,"),inline:s||!1,prepend:!1,nonce:r||""}])}catch(n){}return t}var Qe=()=>{swebRequest.features.define("precaching",null,["onInstall"]),swebRequest.features.define("Precaching",null,["onInstall"]),swebRequest.features.define("skipwaiting",t=>c(void 0,null,function*(){return yield self.skipWaiting(),{}}),["onInstallCompleted"]),swebRequest.features.define("skipWaiting",t=>c(void 0,null,function*(){return yield self.skipWaiting(),{}}),["onInstallCompleted"]),swebRequest.features.define("clients.claim",t=>c(void 0,null,function*(){return yield self.clients.claim(),{}}),["onActivateCompleted"]),swebRequest.features.define("navigationPreload",t=>c(void 0,null,function*(){if(t.phase=="activate"&&self.registration.navigationPreload)yield self.registration.navigationPreload.enable();else if(t.phase=="fetch"&&t.event){try{swebRequest.LoggingFeatures("navigationPreload",t.request.url)}catch(s){}let e=yield t.event.preloadResponse;if(e)return{response:e,next:"onFetchRequestSuccess"}}return{}}),["onActivateCompleted","onBeforeFetchRequest"],{modes:["navigate"]}),swebRequest.features.define("reject.opaque",t=>{if(t.response&&!t.response.ok)throw new TypeError("Bad response status");return Promise.resolve({})}),swebRequest.features.define("timestamp",t=>c(void 0,null,function*(){if(!(t.request&&t.requestHeaders))return{};try{swebRequest.LoggingFeatures("timestamp",t.request.url)}catch(e){}return t.requestHeaders["content-language"]=Date.now(),{requestHeaders:t.requestHeaders}}),["onBeforeCachePut"],{},["requestHeaders"]),swebRequest.features.define("timestamp_verify",t=>c(void 0,null,function*(){if(!(t.request&&t.filter))return{};try{swebRequest.LoggingFeatures("timestamp_verify",t.request.url)}catch(n){}let e=t.filter&&t.filter.maxAge||0,s=0;try{let n=yield Se(t.request);s=parseInt(n["content-language"])}catch(n){}let r=Date.now()-s;return s&&r>=e?{next:"onBeforeFetchRequest",response:void 0}:{}}),["onCacheMatchSuccess"],{},["requestHeaders"]),swebRequest.features.define("injectscripts",t=>c(void 0,null,function*(){if(!(t&&t.request&&t.filter&&t.responseHeaders&&t.response))return{};if(!(self.wasmsqwr||self.cheerio))return{};console.warn("INJECTING SCRIPTS",t);try{swebRequest.LoggingFeatures("injectscripts",t.request.url)}catch(s){}let e="";try{let s=Pe(t.responseHeaders["content-security-policy"]);e=Object.keys(s)[0]}catch(s){}return t.filter.position=="append"?self.wasmsqwr?t.responseBody=Ve(yield t.response.arrayBuffer(),t.filter.scriptstoinject,t.filter.inlinescripts,e):self.cheerio&&(t.responseBody=De(yield t.response.text(),t.filter.scriptstoinject,t.filter.inlinescripts,e)):self.wasmsqwr?t.responseBody=ze(yield t.response.arrayBuffer(),t.filter.scriptstoinject,t.filter.inlinescripts,e):self.cheerio&&(t.responseBody=Ce(yield t.response.text(),t.filter.scriptstoinject,t.filter.inlinescripts,e)),{responseBody:t.responseBody}}),["onRequestCompleted"],{modes:["navigate"],rtypes:["default","basic","cors"]},["responseHeaders"]),swebRequest.features.define("setResponseHeaders",t=>c(void 0,null,function*(){if(!(t.response&&t.filter&&t.filter.headers&&Object.keys(t.filter.headers).length>0))return{};try{t.request&&swebRequest.LoggingFeatures("setResponseHeaders",t.request.url)}catch(e){}if(t.responseHeaders){for(let e in t.filter.headers)t.responseHeaders[e]=t.filter.headers[e];return{responseHeaders:t.responseHeaders}}else{let e=new Headers(t.response.headers);for(let s in t.filter.headers)e.append(s,t.filter.headers[s]);return{responseHeaders:e}}}),["onRequestCompleted"],{rtypes:["default","basic","cors"],origins:["same-origin"]}),swebRequest.features.define("setRequestHeaders",t=>c(void 0,null,function*(){var e,s,r,n;if(!(t.request&&t.filter&&t.filter.headers&&Object.keys(t.filter.headers).length>0))return{};try{swebRequest.LoggingFeatures("setRequestHeaders",t.request.url)}catch(a){}if(t.requestHeaders){for(let a in t.filter.headers)t.requestHeaders[a]=t.filter.headers[a];return t.filter&&t.filter.proxyfetchmetadata&&(t.requestHeaders["x-sec-fetch-dest"]=(e=t.request)==null?void 0:e.destination,t.requestHeaders["x-sec-fetch-mode"]=(s=t.request)==null?void 0:s.mode),{requestHeaders:t.requestHeaders}}else{let a=new Headers(t.request.headers);for(let o in t.filter.headers)a.append(o,t.filter.headers[o]);return t.filter&&t.filter.proxyfetchmetadata&&(a.set("x-sec-fetch-dest",(r=t.request)==null?void 0:r.destination),a.set("x-sec-fetch-mode",(n=t.request)==null?void 0:n.mode)),{requestHeaders:a}}}),["onBeforeFetchRequest"],{origins:["same-origin"]}),swebRequest.features.define("secureswsregistration",t=>c(void 0,null,function*(){try{yield self.clients.claim()}catch(e){}try{let e=yield self.clients.matchAll({includeUncontrolled:!0,type:"window"}),s=t.filter&&t.filter.secureswsurl||"/secureswsregistration.htm",r={};for(let n of e){try{n.navigate(s+"?ourl="+btoa(n.url)).then(()=>{}).catch(console.error)}catch(a){}r[n.url]=""}try{swebRequest.LoggingFeatures("secureswsregistration",JSON.stringify([s,r]))}catch(n){}}catch(e){}return{}}),["onActivateCompleted"]),swebRequest.features.define("redirect",t=>c(void 0,null,function*(){return t.filter&&t.filter.redirectTo?{response:Response.redirect(t.filter.redirectTo),next:"onRequestCompleted"}:{}})),swebRequest.features.define("proxyredirect",t=>c(void 0,null,function*(){var e;if(t&&t.request&&t.filter&&t.filter.redirectTo){let s={},r="";return t.filter.redirectionsource?r=t.filter.redirectTo+encodeURIComponent(t.request.url):t.filter.redirectiontarget&&(r=decodeURIComponent(t.request.url.slice(t.filter.redirectTo.length))),s.method=t.request.method,s.mode=t.request.mode=="navigate"?"same-origin":t.request.mode,s.credentials=t.request.credentials,s.referer=(e=t.request)==null?void 0:e.referrer,t.request.body&&(s.body=yield t.request.arrayBuffer()),{request:new Request(r,s)}}return{}})),swebRequest.features.define("perfstart",t=>c(void 0,null,function*(){return t.event.start=self.performance.now(),{}}),["onRequestReceived"]),swebRequest.features.define("perfsend",t=>c(void 0,null,function*(){try{swebRequest.LoggingFeatures("perfs",t.request.url+","+t.event.start+","+performance.now())}catch(e){}return{}}),["onRequestCompleted"]),swebRequest.features.define("randomvalues",t=>c(void 0,null,function*(){var a;let e="",s=403,r="Forbidden",n={};if(t.request){let o=new URL(t.request.url),i=decodeURIComponent(o.searchParams.get("origin")||""),u=decodeURIComponent(o.searchParams.get("href")||""),f=decodeURIComponent(t.request.headers.get("referer")||""),h=o.searchParams.has("token"),x=o.searchParams.has("secure")&&((a=o.searchParams.get("secure"))==null?void 0:a.toLowerCase())=="true",S=o.searchParams.has("maxage")&&o.searchParams.get("maxage"),v=x||t.filter&&t.filter.secure,K=t.filter&&t.filter.maxAge||3600*24*365;if(S){let ae=Number(S);!isNaN(ae)&&ae>0&&(K=ae)}!f&&!v&&(f=u),u&&i&&f&&u.startsWith(i)&&i!==u&&(u==f||i==f)&&(h||t.filter&&t.filter.token?e=yield he(f,u,i,96):e=yield he(f,u,i,32),s=200,r="OK",n={"content-type":"application/javascript","cache-control":"private, max-age="+K,"x-swr-cloudflare-worker":!0,"x-swr-secure-randomvalues":v})}return{response:new Response(e,{status:s,statusText:r,headers:n}),next:"onRequestCompleted"}}),["onRequestReceived"])};W();var Xe=()=>{let t={};t.encryptionKey=null,t.signatureKey=null,t.originpolicies={},swebRequest.features.define("firewall",e=>c(void 0,null,function*(){try{e.request&&swebRequest.LoggingFeatures("firewall",e.request.url)}catch(s){}return{cancel:!0,response:void 0}}),["onRequestReceived"]),swebRequest.features.define("encryption",e=>c(void 0,null,function*(){if(!(e.request&&e.responseHeaders&&e.response&&e.responseBody&&e.filter&&e.filter.randomBytes))return{};try{swebRequest.LoggingFeatures("encryption",e.request.url)}catch(o){}let s=yield G(e.request.url,e.responseBody,e.responseHeaders,e.response.status,e.response.statusText);t.encryptionKey||(t.encryptionKey=yield le(Uint8Array.from(e.filter.randomBytes.split(""))));let r=fe(),n=yield ve(t.encryptionKey,r,s),a={};return a["last-modified"]=btoa(yield I(r)),{responseHeaders:a,responseBody:n}}),["onBeforeCachePut"],{rtypes:["default","basic","cors"]},["responseHeaders","responseBody=arrayBuffer"]),swebRequest.features.define("decryption",e=>c(void 0,null,function*(){if(!(e.response&&e.request&&e.filter&&e.filter.randomBytes))return{};try{swebRequest.LoggingFeatures("decryption",e.request.url)}catch(s){}try{t.encryptionKey||(t.encryptionKey=yield le(Uint8Array.from(e.filter.randomBytes.split(""))));let s=$(atob(e.response.headers.get("last-modified"))),r=yield e.response.arrayBuffer(),n=Be(yield Oe(t.encryptionKey,s,r));if(n.url==e.request.url)return{response:new Response($(n.body),{headers:n.headers,status:n.status,statusText:n.statusText})}}catch(s){console.error("ERROR DECYPHERING",s,e)}return console.warn("An error occured while deciphering",e,"Let's get a fresh response over network"),{next:"onBeforeFetchRequest",response:void 0}}),["onCacheMatchSuccess"],{rtypes:["default","basic","cors"]},["responseHeaders","responseBody=arrayBuffer"]),swebRequest.features.define("signature",e=>c(void 0,null,function*(){if(!(e.request&&e.response&&e.responseHeaders&&e.filter&&e.filter.randomBytes))return{};try{swebRequest.LoggingFeatures("signature",e.request.url)}catch(s){}try{let s=yield G(e.request.url,e.responseBody,e.responseHeaders,e.response.status,e.response.statusText);t.signatureKey||(t.signatureKey=yield pe(Uint8Array.from(e.filter.randomBytes.split(""))));let r=yield Fe(t.signatureKey,s);return e.responseHeaders["last-modified"]=btoa(yield I(r)),{responseHeaders:e.responseHeaders}}catch(s){console.warn("Error while signing response",s,e.filter)}return{}}),["onBeforeCachePut"],{rtypes:["default","basic","cors"]},["responseHeaders","responseBody=arrayBuffer"]),swebRequest.features.define("verification",e=>c(void 0,null,function*(){if(!(e.response&&e.request&&e.filter&&e.responseHeaders&&e.filter.randomBytes))return{};try{swebRequest.LoggingFeatures("verification",e.request.url)}catch(s){}try{t.signatureKey||(t.signatureKey=yield pe(Uint8Array.from(e.filter.randomBytes.split(""))));let s=$(atob(e.responseHeaders["last-modified"])),r=yield G(e.request.url,e.responseBody,e.responseHeaders,e.response.status,e.response.statusText);if(yield Ae(t.signatureKey,r,s))return{}}catch(s){console.error("An Error Occurred during signature verification",s)}return{next:"onBeforeFetchRequest",response:void 0}}),["onCacheMatchSuccess"],{rtypes:["default","basic","cors"]},["responseHeaders","responseBody=arrayBuffer"]),swebRequest.features.define("originpolicies",e=>c(void 0,null,function*(){if(!(e.response&&e.request))return{};if(!(e.request&&(e.request.mode=="navigate"||e.request.destination=="sharedworker"||e.request.destination=="worker")))return{};let s=new Headers(e.response.headers),r=yield Ee(e),n=!1;for(let a in r){n=!0;for(let o of r[a])s.append(a,o)}if(n){try{swebRequest.LoggingFeatures("originpolicies",e.request.url)}catch(a){}return{responseHeaders:s}}return{}}),["onRequestCompleted"],{modes:["same-origin","navigate"],rtypes:["default","basic","cors"]}),swebRequest.features.define("anonymize_xor",e=>c(void 0,null,function*(){if(!e.request)return{};try{swebRequest.LoggingFeatures("anonymize_xor",e.request.url)}catch(s){}return{request:new Request(e.request,{credentials:"omit",referrer:""})}}),["onBeforeFetchRequest"],{origins:["cross-origin"],modes:["no-cors"]}),swebRequest.features.define("anonymize",e=>c(void 0,null,function*(){if(!e.request)return{};try{swebRequest.LoggingFeatures("anonymize",e.request.url)}catch(s){}return e.request.mode=="no-cors"?{request:new Request(e.request.url,{credentials:"omit",mode:"no-cors",referrer:e.request.referrer})}:{request:new Request(e.request,{credentials:"omit",mode:e.request.mode=="navigate"?"same-origin":e.request.mode,referrer:e.request.referrer})}}),["onBeforeFetchRequest"]),swebRequest.features.define("swcookie",e=>c(void 0,null,function*(){var s,r;if(!(e.request&&e.requestHeaders&&e.filter))return{};try{swebRequest.LoggingFeatures("swcookie",e.request.url)}catch(n){}return e.requestHeaders["x-sw-cookie"]=e.filter.swcookie,e.filter&&e.filter.proxyfetchmetadata&&(e.requestHeaders["x-sec-fetch-dest"]=(s=e.request)==null?void 0:s.destination,e.requestHeaders["x-sec-fetch-mode"]=(r=e.request)==null?void 0:r.mode),{requestHeaders:e.requestHeaders}}),["onBeforeFetchRequest"],{origins:["same-origin"]},["requestHeaders"]),swebRequest.features.define("cspnonces",e=>c(void 0,null,function*(){if(!(e.response&&e.responseHeaders&&e.request))return{};if(!(self.wasmsqwr||self.cheerio))return{};let s=["content-security-policy","content-security-policy-report-only"],r=[];for(let n of s)(e.responseHeaders[n]||"").indexOf("'nonce-")>0&&r.push(n);if(r.length>0){try{swebRequest.LoggingFeatures("cspnonces",e.request.url)}catch(o){}let n="",a={};if(self.wasmsqwr){let o=$e(yield e.response.arrayBuffer());n=o[0],a=o[1]}else if(self.cheerio){let o=ke(yield e.response.text());n=o[0],a=o[1]}for(let o of r){let i=e.responseHeaders[o];for(let u in a)i=i.replaceAll(u,a[u]);e.responseHeaders[o]=i}return{responseHeaders:e.responseHeaders,responseBody:n}}return{}}),["onCacheMatchSuccess"],{modes:["navigate"],rtypes:["default","basic","cors"]},["responseHeaders"]),swebRequest.features.define("redirectrequests",e=>e.request&&e.filter&&e.filter.proxyurl?{request:new Request(e.filter.proxyurl,e.request)}:{}),swebRequest.features.define("proxyrewriterequests",e=>{if(!(e.request&&e.filter&&e.filter.backHost&&e.filter.hostedContent))return{};let s=new URL(e.request.url).pathname.slice(1);if(s in e.filter.hostedContent){let r=new Request(e.filter.backHost+s,e.request);if(e.filter&&e.filter.proxyfetchmetadata){let n=r.headers;n.has("x-sec-fetch-dest")&&n.set("sec-fetch-dest",n.get("x-sec-fetch-dest")),n.has("x-sec-fetch-mode")&&n.set("sec-fetch-mode",n.get("x-sec-fetch-mode")),r=new Request(r,{headers:n})}return{request:r}}else return{response:new Response(s,{status:403}),next:"onRequestCompleted"}},["onRequestReceived"]),swebRequest.features.define("proxyrewriteresponses",e=>c(void 0,null,function*(){if(!(e.response&&e.event&&e.responseHeaders&&e.filter&&e.filter.hostedContent))return{};let s=new URL(e.event.request.url).pathname.slice(1);return s in e.filter.hostedContent?(e.responseHeaders["content-type"]=e.filter.hostedContent[s],{responseHeaders:e.responseHeaders}):{}}),["onFetchRequestSuccess"],{},["responseHeaders"])};D();k();N();C();var Ze={firewall:class{handle(t,e){return c(this,null,function*(){throw new Error("no-response",{url:t.url})})}}};var me={onRequestReceived:["handlerWillStart"],onBeforeCachePut:["cacheWillUpdate"],onCacheMatchSuccess:["cachedResponseWillBeUsed"],onBeforeFetchRequest:["requestWillFetch"],onFetchRequestSuccess:["fetchDidSucceed"],onRequestCompleted:["handlerWillRespond"]},qe=class{constructor(e,s){this.wbevents={};this.feature=e;let[r,n,a,o,i]=R.feature[e];if(this.stages=i,!n)n=s;else if(s&&n)for(let h in s)n[h]=s[h];this.listener=new p(r,n,a,o);let u={},f={};if(i)for(let h in me)if(i.indexOf(h)==-1)for(let x of me[h])f[x]=h;else for(let x of me[h])u[x]=h;qe.cacheKeyWillBeUsedFeatures.indexOf(this.feature)>=0&&(u.cacheKeyWillBeUsed="onBeforeCachePut",delete f.cacheKeyWillBeUsed),this.wbevents=u}static callback(e){return R.feature[e][0]}cacheWillUpdate(e){return c(this,null,function*(){if(!("cacheWillUpdate"in this.wbevents&&e.response))return e.response;try{swebRequest.LoggingApis("cache.put",JSON.stringify([e.request.url,e.request.destination,e.request.mode,e.response.type]))}catch(s){}try{let s={request:e.request,response:e.response,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),s.response)return s.response}catch(s){}return e.response})}cacheKeyWillBeUsed(e){return c(this,null,function*(){if(!("cacheKeyWillBeUsed"in this.wbevents))return e.request;try{swebRequest.LoggingApis("cache.put",JSON.stringify([e.request.url,e.request.destination,e.request.mode]))}catch(s){}try{let s={request:e.request,response:e.response,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),s.request)return s.request}catch(s){}return e.request})}cachedResponseWillBeUsed(e){return c(this,null,function*(){if(!("cachedResponseWillBeUsed"in this.wbevents&&e.cachedResponse))return e.cachedResponse;try{swebRequest.LoggingApis("cache.match",JSON.stringify([e.request.url,e.request.destination,e.request.mode]))}catch(r){}let s={request:e.event.request,response:e.cachedResponse,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),"response"in s&&!s.response)try{yield Nt(s.request)}catch(r){}return"response"in s?s.response:e.cachedResponse})}requestWillFetch(e){return c(this,null,function*(){if(!("requestWillFetch"in this.wbevents)||e.request.cache==="only-if-cached"&&e.request.mode!=="same-origin")return e.request;try{swebRequest.LoggingApis("fetch",JSON.stringify([e.request.url,e.request.destination,e.request.mode]))}catch(s){}try{let s={request:e.request,response:void 0,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),s.request)return s.request}catch(s){}return e.request})}fetchDidSucceed(e){return c(this,null,function*(){if(!("fetchDidSucceed"in this.wbevents&&e.response))return e.response;try{swebRequest.LoggingApis("fetch",JSON.stringify([e.request.url,e.request.destination,e.request.mode,e.response.type]))}catch(s){}try{let s={request:e.request,response:e.response,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),s.response)return s.response}catch(s){}return e.response})}handlerWillRespond(e){return c(this,null,function*(){if(!("handlerWillRespond"in this.wbevents&&e.response))return e.response;try{swebRequest.LoggingApis("fetchEvent.respondWith",JSON.stringify([e.request.url,e.request.destination,e.request.mode,e.response.type]))}catch(r){}let s={request:e.request,response:e.response,event:e.event,phase:"fetch"};return s=yield this.listener.execute(s),s.response?s.response:e.response})}handlerWillStart(e){return c(this,null,function*(){if("handlerWillStart"in this.wbevents){try{swebRequest.LoggingApis("self."+e.event.name,JSON.stringify([e.request.url,e.request.destination,e.request.mode]))}catch(s){}try{let s={request:e.request,phase:"fetch",event:e.event};if(s=yield this.listener.execute(s),"response"in s)try{e.event.respondWith(s.response||new Response)}catch(r){}}catch(s){}}})}},L=qe;L.cacheKeyWillBeUsedFeatures=["timestamp"],L.astrategy=Ze;function Nt(t){return c(this,null,function*(){let e=yield caches.keys();for(let s of e)yield(yield caches.open(s)).delete(t)})}var w=class{static init(e,s,r,n,a){if(n===!1&&(w.standalone=!1,l.disableNextStage=!0,l.disableParallelStages=!0),!w.phases_created){w.phases_created=!0;for(let o in w.phase)try{a&&o in a&&a[o]==!1||w.phase[o].stand(w.standalone)}catch(i){console.error("ERROR",i,o)}}if(e)for(let o in e)w.features[o](e[o]);if(s)for(let o in s)w.strategies[o](s[o]);if(r)for(let o in r)w[o].addListener(null,r[o])}static usefeatures(e,s,r,n){w.init(e,s,r,!1,n)}static execute(){for(let e in w.phases)w.phase[e]=new w.phases[e];for(let e in l.stages)w[e]=l.stages[e];for(let e in g)w[e]=g[e]}static LoggingFeatures(e,s){}static LoggingApis(e,s){}static enableLogging(e=!0,s=!0){}},m=w;m.features=new R,m.strategies=new H,m.phase={},m.phases={},m.standalone=!0,m.FEATURESLOGGING=!1,m.APISLOGGING=!1,m.stages=l.stages,m.phases_created=!1,m.feature=L,m.strategy={},m.commons={};m.phases={fetch:Y,install:Q,activate:X,message:Z,push:ee,sync:te,periodicsync:se,notificationclick:re,notificationclose:ne,pushsubscriptionchange:oe};globalThis.swebRequest=m;st();m.execute();Ge();Qe();Xe();ft();pt();m.commons.plugin=L;globalThis.document||(globalThis.document={});})();
